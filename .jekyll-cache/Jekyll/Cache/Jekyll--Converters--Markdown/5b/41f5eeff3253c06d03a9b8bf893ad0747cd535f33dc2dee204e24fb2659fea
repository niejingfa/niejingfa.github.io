I"Œ<h3 id="ä¸€-join-æŸ¥è¯¢">ä¸€ã€ JOIN æŸ¥è¯¢</h3>
<ul>
  <li>éœ€æ±‚èƒŒæ™¯ï¼šå–å‡ºä¸€å¯¹å¤šæ•°æ®ä¸­çš„æœ€åä¸€æ¡åš <code class="highlighter-rouge">SQL</code> 
<code class="highlighter-rouge">JOIN</code> æŸ¥è¯¢</li>
  <li>ä¾‹å­ï¼š è¡¨ <code class="highlighter-rouge">project</code> 1 å¯¹ n è¡¨ <code class="highlighter-rouge">rejected_projects</code>ï¼Œ å¤–é”®ï¼š <code class="highlighter-rouge">project_id</code></li>
  <li>æè¿°ï¼šé€šè¿‡ <code class="highlighter-rouge">GROUP BY</code> å¯¹å¤–é”® <code class="highlighter-rouge">project_id</code> åˆ†ç»„ï¼ŒæŒ‰æ¡ä»¶å–å‡ºæœ€åä¸€æ¡æ•°æ®ï¼Œåšæˆä¸€ä¸ªidé›†åˆï¼Œ ç„¶å <code class="highlighter-rouge">JOIN</code> è¿™ä¸ªé›†åˆå–å‡ºæ•´æ¡è®°å½•çš„é›†åˆï¼Œ æœ€å <code class="highlighter-rouge">JOIN</code> è¿™ä¸ªè®°å½•çš„é›†åˆè¿›è¡Œå¤æŸ¥æŸ¥è¯¢</li>
</ul>

<h4 id="sql-å®ä¾‹"><strong><code class="highlighter-rouge">SQL</code> å®ä¾‹:</strong></h4>
<h4 id="1-id-é›†åˆ">1. <code class="highlighter-rouge">id</code> é›†åˆï¼š</h4>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">max</span><span class="p">(</span><span class="n">rp</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="k">as</span> <span class="n">rp_id</span><span class="p">,</span> <span class="n">rp</span><span class="p">.</span><span class="n">project_id</span> <span class="k">as</span> <span class="n">project_id</span> <span class="k">from</span> <span class="n">rejected_projects</span> <span class="n">rp</span> <span class="k">group</span> <span class="k">by</span> <span class="n">rp</span><span class="p">.</span><span class="n">project_id</span>
</code></pre></div></div>

<h4 id="2-join-è¿™ä¸ª-id-é›†åˆå–å‡ºæ•´æ¡è®°å½•çš„é›†åˆ">2. <code class="highlighter-rouge">JOIN</code> è¿™ä¸ª <code class="highlighter-rouge">id</code> é›†åˆå–å‡ºæ•´æ¡è®°å½•çš„é›†åˆ</h4>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">rp</span><span class="p">.</span><span class="o">*</span> <span class="k">from</span> <span class="n">rejected_projects</span> <span class="n">rp</span>
<span class="k">join</span> <span class="p">(</span><span class="k">select</span> <span class="k">max</span><span class="p">(</span><span class="n">rp</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="k">as</span> <span class="n">rp_id</span><span class="p">,</span> <span class="n">rp</span><span class="p">.</span><span class="n">project_id</span> <span class="k">as</span> <span class="n">project_id</span> <span class="k">from</span> <span class="n">rejected_projects</span> <span class="n">rp</span> <span class="k">group</span> <span class="k">by</span> <span class="n">rp</span><span class="p">.</span><span class="n">project_id</span><span class="p">)</span> <span class="n">rp_dump</span> <span class="k">on</span> <span class="n">rp_dump</span><span class="p">.</span><span class="n">rp_id</span> <span class="o">=</span> <span class="n">rp</span><span class="p">.</span><span class="n">id</span>
</code></pre></div></div>

<h4 id="3-join-è¿™ä¸ªè®°å½•é›†åˆè¿›è¡Œå¤æ‚æŸ¥è¯¢">3. <code class="highlighter-rouge">JOIN</code> è¿™ä¸ªè®°å½•é›†åˆè¿›è¡Œå¤æ‚æŸ¥è¯¢</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">projects</span> <span class="k">JOIN</span> <span class="p">(</span>
  <span class="k">select</span> <span class="n">rp</span><span class="p">.</span><span class="o">*</span> <span class="k">from</span> <span class="n">rejected_projects</span> <span class="n">rp</span>
  <span class="k">join</span> <span class="p">(</span><span class="k">select</span> <span class="k">max</span><span class="p">(</span><span class="n">rp</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="k">as</span> <span class="n">rp_id</span><span class="p">,</span> <span class="n">rp</span><span class="p">.</span><span class="n">project_id</span> <span class="k">as</span> <span class="n">project_id</span> <span class="k">from</span> <span class="n">rejected_projects</span> <span class="n">rp</span> <span class="k">group</span> <span class="k">by</span> <span class="n">rp</span><span class="p">.</span><span class="n">project_id</span><span class="p">)</span> <span class="n">rp_dump</span> <span class="k">on</span> <span class="n">rp_dump</span><span class="p">.</span><span class="n">rp_id</span> <span class="o">=</span> <span class="n">rp</span><span class="p">.</span><span class="n">id</span>
<span class="p">)</span> <span class="n">rp2</span> <span class="k">on</span> <span class="n">rp2</span><span class="p">.</span><span class="n">project_id</span> <span class="o">=</span> <span class="n">projects</span><span class="p">.</span><span class="n">id</span>
</code></pre></div></div>
<h3 id="äºŒ-å­æŸ¥è¯¢">äºŒã€ å­æŸ¥è¯¢</h3>
<ul>
  <li>éœ€æ±‚èƒŒæ™¯ï¼šæŸäº›è”è¡¨æŸ¥è¯¢</li>
  <li>ä¾‹å­ï¼š è¡¨ <code class="highlighter-rouge">project</code> 1 å¯¹ n è¡¨ <code class="highlighter-rouge">rejected_projects</code>ï¼Œ å¤–é”®ï¼š <code class="highlighter-rouge">project_id</code></li>
</ul>

<h4 id="1-join-sql">1. <code class="highlighter-rouge">JOIN SQL</code></h4>

<pre><code class="language-SQL">select * from projects p join rejected_projects rp on rp.project_id = p.id where rp.created_at &gt; '2019-12-11 00:00:00'
</code></pre>
<h4 id="2-exists-sql">2. <code class="highlighter-rouge">EXISTS SQL</code></h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">projects</span> <span class="k">where</span> 
<span class="k">exists</span> <span class="p">(</span><span class="k">select</span> <span class="mi">1</span> <span class="k">from</span> <span class="n">rejected_projects</span> <span class="n">rp</span> <span class="k">where</span> <span class="n">rp</span><span class="p">.</span><span class="n">project_id</span><span class="o">=</span><span class="n">projects</span><span class="p">.</span><span class="n">id</span> <span class="k">and</span> <span class="n">rp</span><span class="p">.</span><span class="n">created_at</span> <span class="o">&gt;</span> <span class="s1">'2019-12-11 00:00:00'</span><span class="p">)</span>
</code></pre></div></div>
<p><strong>é€‚ç”¨åœºæ™¯: è¢« JOIN çš„è¡¨å¾ˆå¤§</strong></p>

<h3 id="ä¸‰-å¼€çª—å‡½æ•°">ä¸‰ã€ å¼€çª—å‡½æ•°</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ROW_NUMBER()
ã€è¯­æ³•ã€‘ROW_NUMBER() OVER (PARTITION BY COL1 ORDER BY COL2)
ã€åŠŸèƒ½ã€‘è¡¨ç¤ºæ ¹æ®COL1åˆ†ç»„ï¼Œåœ¨åˆ†ç»„å†…éƒ¨æ ¹æ® COL2æ’åºï¼Œè€Œè¿™ä¸ªå€¼å°±è¡¨ç¤ºæ¯ç»„å†…éƒ¨æ’åºåçš„é¡ºåºç¼–å·ï¼ˆç»„å†…è¿ç»­çš„å”¯ä¸€çš„ï¼‰
row_number() è¿”å›çš„ä¸»è¦æ˜¯â€œè¡Œâ€çš„ä¿¡æ¯ï¼Œå¹¶æ²¡æœ‰æ’å
ã€å‚æ•°ã€‘
ã€è¯´æ˜ã€‘Oracleåˆ†æå‡½æ•°

ä¸»è¦åŠŸèƒ½ï¼šç”¨äºå–å‰å‡ åï¼Œæˆ–è€…æœ€åå‡ åç­‰

</code></pre></div></div>
<p>ã€ç¤ºä¾‹ã€‘
è¡¨å†…å®¹å¦‚ä¸‹ï¼š
```
name | seqno | description
A | 1 | test
A | 2 | test
A | 3 | test
A | 4 | test
B | 1 | test
B | 2 | test
B | 3 | test
B | 4 | test
C | 1 | test
C | 2 | test
C | 3 | test
C | 4 | test</p>

<p>æˆ‘æƒ³æœ‰ä¸€ä¸ªsqlè¯­å¥ï¼Œæœç´¢çš„ç»“æœæ˜¯
A | 1 | test
A | 2 | test
B | 1 | test
B | 2 | test
C | 1 | test
C | 2 | test
å®ç°:
select name,seqno,description
from(select name,seqno,description,row_number() over (partition by name order by seqno) id
from table_name) where id&lt;=3;</p>

<blockquote>
  <p>http://www.shouce.ren/api/oracle/#</p>
</blockquote>
:ET