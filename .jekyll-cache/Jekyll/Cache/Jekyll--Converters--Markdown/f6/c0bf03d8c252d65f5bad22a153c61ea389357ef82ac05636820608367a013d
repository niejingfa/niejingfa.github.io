I"ú<p>é¿å…ä½¿ç”¨<code class="highlighter-rouge">raw</code>å’Œ<code class="highlighter-rouge">html_safe</code>, å®‰å…¨ä½¿ç”¨<code class="highlighter-rouge">sanitize</code></p>
<ul>
  <li>
    <h3 id="raw">raw</h3>
    <p>ä¾‹å¦‚ï¼š</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="sx">%= raw "&lt;script type=</span><span class="p">\</span><span class="s2">"text/javascript</span><span class="se">\"</span><span class="s2">&gt;window.location.href='http://www.test.com?a=</span><span class="si">#{</span><span class="no">User</span><span class="p">.</span><span class="nf">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">).</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:phone</span><span class="p">).</span><span class="nf">join</span><span class="p">(</span><span class="s1">','</span><span class="p">)</span><span class="si">}</span><span class="s2">';&lt;/script&gt;"</span> <span class="o">%&gt;</span></code></pre></figure>

<p>ç»“æœï¼š
æ‰§è¡Œ <code class="highlighter-rouge">script</code>ä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”æŸ¥è¯¢<code class="highlighter-rouge">User</code>æ•°æ®å‘é€ç»™<code class="highlighter-rouge">www.test.com</code>,å¦‚æœ<code class="highlighter-rouge">www.test.com</code>æ˜¯è‡ªå·±çš„æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨ä¸­æˆªå–<code class="highlighter-rouge">User</code>ç”¨æˆ·æ•°æ®ï¼Œæ¯”å¦‚<code class="highlighter-rouge">cookie</code></p>
:ET