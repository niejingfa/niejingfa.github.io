I"º_<h3 id="å‰è¨€">å‰è¨€</h3>
<p>ä½¿ç”¨ <code class="highlighter-rouge">Composition API</code> ç¼–å†™çš„ä»£ç æ›´æ˜“è¯»ï¼Œå¹¶ä¸”åœºæ™¯ä¸å¤æ‚ï¼Œè¿™ä½¿å¾—é˜…è¯»å’Œå­¦ä¹ å˜å¾—æ›´å®¹æ˜“ã€‚</p>

<p>è§£å†³äº† <code class="highlighter-rouge">vue 2.x</code> é€‰é¡¹å¼ API çš„ä¸€äº›ç—›ç‚¹ï¼š</p>
<ul>
  <li>åŸºäº <code class="highlighter-rouge">Vue2</code> çš„å¤§å‹ç»„ä»¶å¾ˆéš¾ç»´æŠ¤ã€‚</li>
  <li>åŸºäº <code class="highlighter-rouge">Vue2</code> å°è£…çš„ç»„ä»¶é€»è¾‘å¤ç”¨å›°éš¾ã€‚</li>
  <li><code class="highlighter-rouge">Vue2</code> å¯¹ <code class="highlighter-rouge">TypeScript</code> æ”¯æŒæœ‰é™ã€‚</li>
</ul>

<p>ä¸€èˆ¬æˆ‘ä»¬çš„é¡¹ç›®éƒ½æ˜¯ <code class="highlighter-rouge">vue 2.x</code>, å¦‚æœæƒ³ä½¿ç”¨ <code class="highlighter-rouge">composition-api</code>
å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼š <a href="https://github.com/vuejs/composition-api">@vue/composition-api</a></p>

<h3 id="ä¸€-å¼•å…¥åˆ°é¡¹ç›®ä¸­">ä¸€ã€ å¼•å…¥åˆ°é¡¹ç›®ä¸­</h3>
<h4 id="1-å®‰è£…">1. å®‰è£…</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> @vue/composition-api
<span class="c"># or</span>
yarn add @vue/composition-api
</code></pre></div></div>
<h4 id="2-é…ç½®">2. é…ç½®</h4>

<p>åœ¨ <code class="highlighter-rouge">main.js</code> ä¸­æ·»åŠ ä¸€ä¸‹é…ç½®ï¼š</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">VueCompositionAPI</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/composition-api</span><span class="dl">'</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">VueCompositionAPI</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="äºŒ-ä½¿ç”¨">äºŒã€ ä½¿ç”¨</h3>
<hr />
<h4 id="1-reactive-å’Œ-ref">1. reactive å’Œ ref</h4>
<h4 id="11-reactive">1.1. reactive</h4>
<p>æ¥æ”¶ä¸€ä¸ªæ™®é€šå¯¹è±¡ç„¶åè¿”å›è¯¥æ™®é€šå¯¹è±¡çš„å“åº”å¼ä»£ç†ã€‚</p>

<p>å“åº”å¼è½¬æ¢æ˜¯â€œæ·±å±‚çš„â€ï¼šä¼šå½±å“å¯¹è±¡å†…éƒ¨æ‰€æœ‰åµŒå¥—çš„å±æ€§ã€‚åŸºäº ES2015 çš„ Proxy å®ç°ï¼Œè¿”å›çš„ä»£ç†å¯¹è±¡ä¸ç­‰äºåŸå§‹å¯¹è±¡ã€‚å»ºè®®ä»…ä½¿ç”¨ä»£ç†å¯¹è±¡è€Œé¿å…ä¾èµ–åŸå§‹å¯¹è±¡ã€‚</p>
<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;span&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;span&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">'addAge'</span><span class="nt">&gt;</span>æ”¹å˜å±æ€§<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">'changePeople'</span><span class="nt">&gt;</span>æ”¹å˜å¯¹è±¡<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">'changeObject'</span><span class="nt">&gt;</span>æ”¹å˜ reactive<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="c1">// å¯¼å…¥ reactive</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">reactive</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/composition-api</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="c1">// ä»£æ›¿ä¹‹å‰çš„ beforeCreate, create</span>
  <span class="nx">setup</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">people</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blank</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">25</span><span class="p">})</span>
    <span class="kd">function</span> <span class="nx">addAge</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">people</span><span class="p">.</span><span class="nx">age</span> <span class="o">++</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">changePeople</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">people</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">shawn</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">21</span> <span class="p">}</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">people</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">changeObject</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">people</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">jesse</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">18</span> <span class="p">})</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">people</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// è¿”å›ç”¨åˆ°çš„æ–¹æ³•å’Œæ•°æ®</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">people</span><span class="p">,</span> <span class="nx">addAge</span><span class="p">,</span> <span class="nx">changePeople</span><span class="p">,</span> <span class="nx">changeObject</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h4 id="12-ref">1.2. ref</h4>
<p>æ¥å—ä¸€ä¸ªå‚æ•°å€¼å¹¶è¿”å›ä¸€ä¸ªå“åº”å¼ä¸”å¯æ”¹å˜çš„ <code class="highlighter-rouge">ref</code> å¯¹è±¡ã€‚ref å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªæŒ‡å‘å†…éƒ¨å€¼çš„å•ä¸€å±æ€§ <code class="highlighter-rouge">.value</code></p>

<p>å¦‚æœä¼ å…¥ <code class="highlighter-rouge">ref</code> çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†è°ƒç”¨ <code class="highlighter-rouge">reactive</code> æ–¹æ³•è¿›è¡Œæ·±å±‚å“åº”è½¬æ¢ã€‚</p>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="c">&lt;!-- &gt; age é»˜è®¤ä¸ç”¨åŠ  value </span><span class="nt">&lt;</span> <span class="nt">--&gt;</span>
    <span class="nt">&lt;span&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">'addAge'</span><span class="nt">&gt;</span>æ”¹å˜<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/composition-api</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">setup</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
    <span class="kd">function</span> <span class="nx">addAge</span> <span class="p">()</span> <span class="p">{</span>
      <span class="c1">// éœ€è¦ .value</span>
      <span class="nx">age</span><span class="p">.</span><span class="nx">value</span> <span class="o">++</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">age</span><span class="p">,</span> <span class="nx">addAge</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div>

<hr />

<h4 id="2-watch">2. watch</h4>
<p>å’Œ <code class="highlighter-rouge">vue2.x</code> ä¸­çš„ <code class="highlighter-rouge">watch</code> ä¸€æ ·</p>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="c">&lt;!-- &gt; age é»˜è®¤ä¸ç”¨åŠ  value </span><span class="nt">&lt;</span> <span class="nt">--&gt;</span>
    <span class="nt">&lt;span&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">'addAge'</span><span class="nt">&gt;</span>æ”¹å˜<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">watch</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/composition-api</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">setup</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
    <span class="kd">function</span> <span class="nx">addAge</span> <span class="p">()</span> <span class="p">{</span>
      <span class="c1">// éœ€è¦ .value</span>
      <span class="nx">age</span><span class="p">.</span><span class="nx">value</span> <span class="o">++</span>
    <span class="p">}</span>
    <span class="nx">watch</span><span class="p">(</span>
      <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">age</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
      <span class="p">(</span><span class="nx">to</span><span class="p">,</span> <span class="k">from</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">to</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">age</span><span class="p">,</span> <span class="nx">addAge</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>beforeCreate -&gt; ä½¿ç”¨ setup()
created -&gt; ä½¿ç”¨ setup()
beforeMount -&gt; onBeforeMount
mounted -&gt; onMounted
- beforeUpdate -&gt; onBeforeUpdate
- updated -&gt; onUpdated
- beforeDestroy -&gt; onBeforeUnmount
- destroyed -&gt; onUnmounted
- errorCaptured -&gt; onErrorCaptured
</code></pre></div></div>

<p><strong>æ³¨ï¼š<code class="highlighter-rouge">setup()</code> ä¸­ <code class="highlighter-rouge">this</code> ä¸å¯ç”¨ï¼Œæ˜¯ <code class="highlighter-rouge">undefined</code></strong></p>

<h3 id="3-setup-ä¸­ä¼ å…¥çš„å±æ€§">3. setup ä¸­ä¼ å…¥çš„å±æ€§</h3>

<ul>
  <li>props</li>
  <li>context
    <ul>
      <li>root: <code class="highlighter-rouge">vue2.x</code> ä¸­çš„ <code class="highlighter-rouge">this</code></li>
      <li>emit: <code class="highlighter-rouge">vue2.x</code> ä¸­çš„ <code class="highlighter-rouge">this.$emit</code></li>
      <li>attrs: <code class="highlighter-rouge">vue2.x</code> ä¸­çš„ <code class="highlighter-rouge">this.$attrs</code></li>
      <li>slots: <code class="highlighter-rouge">vue2.x</code> ä¸­çš„ <code class="highlighter-rouge">this.$slots</code></li>
    </ul>
  </li>
</ul>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">watch</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/composition-api</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="c1">// propsï¼š ç»„ä»¶ä¸­ä¼ é€’çš„å‚æ•°</span>
  <span class="nx">setup</span> <span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// this</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span>
    <span class="c1">// this.$emit</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">emit</span><span class="p">)</span>
    <span class="c1">// this.$attrs</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">attrs</span><span class="p">)</span>
    <span class="c1">// this.$slots</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">slots</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h3 id="ä¾èµ–æ³¨å…¥-provide-å’Œ-inject">ä¾èµ–æ³¨å…¥ <code class="highlighter-rouge">provide</code> å’Œ <code class="highlighter-rouge">inject</code></h3>
<p><code class="highlighter-rouge">provide</code> å’Œ <code class="highlighter-rouge">inject</code> æä¾›ä¾èµ–æ³¨å…¥ï¼ŒåŠŸèƒ½ç±»ä¼¼ <code class="highlighter-rouge">2.x</code> çš„ <code class="highlighter-rouge">provide/inject</code>ã€‚ä¸¤è€…éƒ½åªèƒ½åœ¨å½“å‰æ´»åŠ¨ç»„ä»¶å®ä¾‹çš„ <code class="highlighter-rouge">setup()</code> ä¸­è°ƒç”¨</p>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;span&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">'addAge'</span><span class="nt">&gt;</span>æ”¹å˜<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;InjectVue</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">provide</span><span class="p">,</span> <span class="nx">reactive</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/composition-api</span><span class="dl">'</span>

<span class="k">import</span> <span class="nx">InjectVue</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./inject.vue</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">setup</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blank</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">25</span><span class="p">})</span>
    <span class="nx">provide</span><span class="p">(</span><span class="dl">'</span><span class="s1">person</span><span class="dl">'</span><span class="p">,</span> <span class="nx">person</span><span class="p">)</span>

    <span class="kd">function</span> <span class="nx">addAge</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">++</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">person</span><span class="p">,</span> <span class="nx">addAge</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">InjectVue</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">inject.vue</code></p>
<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;span&gt;</span>inject: <span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">'changePerson'</span><span class="nt">&gt;</span>æ”¹å˜<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">inject</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/composition-api</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">setup</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">inject</span><span class="p">(</span><span class="dl">'</span><span class="s1">person</span><span class="dl">'</span><span class="p">)</span>

    <span class="kd">function</span> <span class="nx">changePerson</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">shawn</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">21</span><span class="p">}</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">person</span><span class="p">,</span> <span class="nx">changePerson</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p><strong>å¯ä»¥ä½¿ç”¨ <code class="highlighter-rouge">ref</code> æ¥ä¿è¯ <code class="highlighter-rouge">provided</code> å’Œ <code class="highlighter-rouge">injected</code> ä¹‹é—´å€¼çš„å“åº”</strong></p>

<h2 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£ï¼š</h2>
<blockquote>
  <p>https://composition-api.vuejs.org/zh/api.html
<br />
https://github.com/vuejs/composition-api
<br />
https://v3.cn.vuejs.org/api/composition-api.html</p>
</blockquote>

<hr />

<h3 id="è‡ªå®šä¹‰æ’åº">è‡ªå®šä¹‰æ’åº</h3>

<p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªå­—æ®µï¼š type ( 1, 2, 3 )
ç„¶åæœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œè¦æŒ‰ç…§ 2, 1, 3 è¿™æ ·æ’åº
oracleï¼š</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">id</span> <span class="k">from</span> <span class="n">projects</span> <span class="k">where</span> <span class="n">id</span> <span class="k">IN</span> <span class="p">(</span><span class="mi">36611</span><span class="p">,</span> <span class="mi">36612</span><span class="p">,</span> <span class="mi">36613</span><span class="p">)</span> <span class="k">order</span> <span class="k">by</span> <span class="n">decode</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="mi">36612</span><span class="p">,</span><span class="mi">36613</span><span class="p">,</span><span class="mi">36611</span><span class="p">)</span>
</code></pre></div></div>
<p>mysql:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">id</span> <span class="k">from</span> <span class="n">bid_infos</span> <span class="k">where</span> <span class="n">id</span> <span class="k">in</span> <span class="p">(</span><span class="mi">21692416</span><span class="p">,</span> <span class="mi">21692672</span><span class="p">,</span> <span class="mi">21693184</span><span class="p">)</span> <span class="k">order</span> <span class="k">by</span> <span class="n">field</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="mi">21692672</span><span class="p">,</span> <span class="mi">21693184</span><span class="p">,</span> <span class="mi">21692416</span><span class="p">)</span> <span class="k">desc</span>
</code></pre></div></div>
<p>postgres:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">pj_projects</span>
<span class="k">where</span> <span class="n">id</span> <span class="k">IN</span> <span class="p">(</span><span class="mi">35771</span><span class="p">,</span> <span class="mi">35772</span><span class="p">,</span> <span class="mi">35773</span><span class="p">)</span>
  <span class="k">ORDER</span> <span class="k">BY</span>
  <span class="k">CASE</span>
    <span class="k">WHEN</span> <span class="n">id</span><span class="o">=</span><span class="mi">35772</span> <span class="k">THEN</span> <span class="mi">1</span>
    <span class="k">WHEN</span> <span class="n">id</span><span class="o">=</span><span class="mi">35771</span> <span class="k">THEN</span> <span class="mi">2</span>
    <span class="k">WHEN</span> <span class="n">id</span><span class="o">=</span><span class="mi">35773</span> <span class="k">THEN</span> <span class="mi">3</span>
  <span class="k">END</span> <span class="k">asc</span>
</code></pre></div></div>
:ET