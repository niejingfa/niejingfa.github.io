<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2020-01-10T18:34:57+08:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">blank的个人博客</title><subtitle>个人的一个免费分享网站，可以转载，注明出处!! ←联系我github, gmail</subtitle><entry><title type="html">RegExp.lastIndex 属性</title><link href="http://localhost:4000/2020/01/10/lastIndex.html" rel="alternate" type="text/html" title="RegExp.lastIndex 属性" /><published>2020-01-10T18:10:22+08:00</published><updated>2020-01-10T18:10:22+08:00</updated><id>http://localhost:4000/2020/01/10/lastIndex</id><content type="html" xml:base="http://localhost:4000/2020/01/10/lastIndex.html">&lt;h1 id=&quot;regexplastindex-属性&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;RegExp.lastIndex&lt;/code&gt; 属性&lt;/h1&gt;

&lt;p&gt;遇到一个&lt;a href=&quot;http://jira.rccchina.com/browse/PG-2081&quot;&gt;售后&lt;/a&gt; ，
&lt;code class=&quot;highlighter-rouge&quot;&gt;Regexp&lt;/code&gt; 匹配数据时，有时候数据能匹配出来，有时候不能匹配出来&lt;/p&gt;

&lt;p&gt;总结了一下 &lt;code class=&quot;highlighter-rouge&quot;&gt;Regexp&lt;/code&gt; 的问题&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;代码示例如下：
```javascript
let reg = new RegExp(‘c.*’, ‘g’)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;reg.test(‘chen’) // true
reg.test(‘chen’) // false&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
同样两次比对，第一次返回 true， 第二次返回 false

- 查找原因

查阅资料后发现，是正则的 `lastIndex` 改变了

```js
let reg = new RegExp('c.*', 'g')
console.log(reg.lastIndex) // 0

reg.test('chen') // true
console.log(reg.lastIndex) // 4

reg.test('chen') // false
console.log(reg.lastIndex) // 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;只有正则表达式使用了表示全局检索的 “g” 标志时，该属性才会起作用。此时应用下面的规则：&lt;br /&gt;
如果 lastIndex 大于字符串的长度，则 regexp.test 和 regexp.exec 将会匹配失败，然后 lastIndex 被设置为 0。&lt;br /&gt;
如果 lastIndex 等于字符串的长度，且该正则表达式匹配空字符串，则该正则表达式匹配从 lastIndex 开始的字符串。（then the regular expression matches input starting at lastIndex.）&lt;br /&gt;
如果 lastIndex 等于字符串的长度，且该正则表达式不匹配空字符串 ，则该正则表达式不匹配字符串，lastIndex 被设置为 0.。&lt;br /&gt;
否则，lastIndex 被设置为紧随最近一次成功匹配的下一个位置。&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name></name></author><summary type="html">RegExp.lastIndex 属性</summary></entry><entry><title type="html">SQL 复杂查询解决方案</title><link href="http://localhost:4000/2019/12/30/%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2.html" rel="alternate" type="text/html" title="SQL 复杂查询解决方案" /><published>2019-12-30T09:36:28+08:00</published><updated>2019-12-30T09:36:28+08:00</updated><id>http://localhost:4000/2019/12/30/%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2</id><content type="html" xml:base="http://localhost:4000/2019/12/30/%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2.html">&lt;h2 id=&quot;第一种&quot;&gt;第一种&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;需求背景：取出一对多数据中的最后一条做 &lt;code class=&quot;highlighter-rouge&quot;&gt;SQL&lt;/code&gt; 
&lt;code class=&quot;highlighter-rouge&quot;&gt;JOIN&lt;/code&gt; 查询&lt;/li&gt;
  &lt;li&gt;例子： 表 &lt;code class=&quot;highlighter-rouge&quot;&gt;project&lt;/code&gt; 1 对 n 表 &lt;code class=&quot;highlighter-rouge&quot;&gt;rejected_projects&lt;/code&gt;， 外键： &lt;code class=&quot;highlighter-rouge&quot;&gt;project_id&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;描述：通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;GROUP BY&lt;/code&gt; 对外键 &lt;code class=&quot;highlighter-rouge&quot;&gt;project_id&lt;/code&gt; 分组，按条件取出最后一条数据，做成一个id集合， 然后 &lt;code class=&quot;highlighter-rouge&quot;&gt;JOIN&lt;/code&gt; 这个集合取出整条记录的集合， 最后 &lt;code class=&quot;highlighter-rouge&quot;&gt;JOIN&lt;/code&gt; 这个记录的集合进行复查查询&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;SQL&lt;/code&gt; 实例:
    &lt;ol&gt;
      &lt;li&gt;id集合：
        &lt;pre&gt;&lt;code class=&quot;language-SQL&quot;&gt;select max(rp.id) as rp_id, rp.project_id as project_id from rejected_projects rp group by rp.project_id
&lt;/code&gt;&lt;/pre&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;JOIN&lt;/code&gt; 这个id集合取出整条记录的集合
    &lt;pre&gt;&lt;code class=&quot;language-SQL&quot;&gt;select rp.* from rejected_projects rp
join (select max(rp.id) as rp_id, rp.project_id as project_id from rejected_projects rp group by rp.project_id) rp_dump on rp_dump.rp_id = rp.id
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;JOIN&lt;/code&gt; 这个记录集合进行复杂查询&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code class=&quot;language-SQL&quot;&gt;select * from projects JOIN (
  select rp.* from rejected_projects rp
  join (select max(rp.id) as rp_id, rp.project_id as project_id from rejected_projects rp group by rp.project_id) rp_dump on rp_dump.rp_id = rp.id
) rp2 on rp2.project_id = projects.id
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;第二种---子查询&quot;&gt;第二种 - 子查询&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;需求背景：某些联表查询&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;例子： 表 &lt;code class=&quot;highlighter-rouge&quot;&gt;project&lt;/code&gt; 1 对 n 表 &lt;code class=&quot;highlighter-rouge&quot;&gt;rejected_projects&lt;/code&gt;， 外键： &lt;code class=&quot;highlighter-rouge&quot;&gt;project_id&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;em&gt;JOIN SQL&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&quot;language-SQL&quot;&gt;select * from projects p join rejected_projects rp on rp.project_id = p.id where rp.created_at &amp;gt; '2019-12-11 00:00:00'
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;EXISTS SQL&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&quot;language-SQL&quot;&gt;select * from projects where 
exists (select 1 from rejected_projects rp where rp.project_id=projects.id and rp.created_at &amp;gt; '2019-12-11 00:00:00')
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;适用场景: 被 JOIN 的表很大&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">第一种 需求背景：取出一对多数据中的最后一条做 SQL JOIN 查询 例子： 表 project 1 对 n 表 rejected_projects， 外键： project_id 描述：通过 GROUP BY 对外键 project_id 分组，按条件取出最后一条数据，做成一个id集合， 然后 JOIN 这个集合取出整条记录的集合， 最后 JOIN 这个记录的集合进行复查查询</summary></entry><entry><title type="html">postgres 操作字符</title><link href="http://localhost:4000/2019/12/30/postgresql%E6%93%8D%E4%BD%9C%E5%AD%97%E7%AC%A6.html" rel="alternate" type="text/html" title="postgres 操作字符" /><published>2019-12-30T09:36:24+08:00</published><updated>2019-12-30T09:36:24+08:00</updated><id>http://localhost:4000/2019/12/30/postgresql%E6%93%8D%E4%BD%9C%E5%AD%97%E7%AC%A6</id><content type="html" xml:base="http://localhost:4000/2019/12/30/postgresql%E6%93%8D%E4%BD%9C%E5%AD%97%E7%AC%A6.html">&lt;h2 id=&quot;text&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;text&lt;/code&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;把数据列转成字符串进行操作查询&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;例如： &lt;code class=&quot;highlighter-rouge&quot;&gt;cutoff_id::text&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;substring&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;substring&lt;/code&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;切割字符串&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;例如： &lt;code class=&quot;highlighter-rouge&quot;&gt;substring(cutoff_id::text from 1 for 4)&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;1: 哪个字符开始&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;4: 截取几个字符&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;em&gt;_取 &lt;code class=&quot;highlighter-rouge&quot;&gt;cutoff_id&lt;/code&gt; 的 第 1 个字符开始，取 4 个_&lt;/em&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;lpad&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;lpad&lt;/code&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;字符拼接&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;例如：&lt;code class=&quot;highlighter-rouge&quot;&gt;lpad(substring(cutoff_id::text, 10, '0')&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;10: &lt;code class=&quot;highlighter-rouge&quot;&gt;cutoff_id&lt;/code&gt; 要生成 10 位数&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;‘0’: &lt;code class=&quot;highlighter-rouge&quot;&gt;cutoff_id&lt;/code&gt; 少于 10 位，在左边补 ‘0’&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;扩展阅读：&lt;em&gt;_rpad_&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;char_length&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;char_length&lt;/code&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;返回数据列的数据长度&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;例如：&lt;code class=&quot;highlighter-rouge&quot;&gt;char_length(cutoff_id::text)&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;如果 &lt;code class=&quot;highlighter-rouge&quot;&gt;cutoff_id&lt;/code&gt; 是 &lt;code class=&quot;highlighter-rouge&quot;&gt;2019101&lt;/code&gt;, 返回 7&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;right&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;RIGHT&lt;/code&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;从右边开始截取字符&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;例如： &lt;code class=&quot;highlighter-rouge&quot;&gt;RIGHT(cutoff_id::text, 1)&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;1: 1 个字符&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;返回 &lt;code class=&quot;highlighter-rouge&quot;&gt;cutoff_id&lt;/code&gt; 最右边的 1 个字符&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;||&lt;/code&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;合并字符串&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;例如： &lt;code class=&quot;highlighter-rouge&quot;&gt;substring(cutoff_id::text from 1 for 4)||RIGHT(cutoff_id::text, 1)&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;如果：&lt;code class=&quot;highlighter-rouge&quot;&gt;cutoff_id&lt;/code&gt; 为 &lt;code class=&quot;highlighter-rouge&quot;&gt;2019112&lt;/code&gt;, 返回：’20192’&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">text</summary></entry><entry><title type="html">Solr 批量创建索引</title><link href="http://localhost:4000/2019/12/30/%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95.html" rel="alternate" type="text/html" title="Solr 批量创建索引" /><published>2019-12-30T09:36:22+08:00</published><updated>2019-12-30T09:36:22+08:00</updated><id>http://localhost:4000/2019/12/30/%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95</id><content type="html" xml:base="http://localhost:4000/2019/12/30/%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95.html">&lt;h1 id=&quot;solr-批量创建索引&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Solr&lt;/code&gt; 批量创建索引&lt;/h1&gt;

&lt;h2 id=&quot;第一种&quot;&gt;第一种&lt;/h2&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find_in_batches&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Sunspot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Sunspot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;commit&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;一次提交，但是会生成很多 &lt;code class=&quot;highlighter-rouge&quot;&gt;has_many&lt;/code&gt; 的 &lt;code class=&quot;highlighter-rouge&quot;&gt;SQL&lt;/code&gt;, 创建索引还是很慢&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;比如生成的SQL：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-SQL&quot;&gt;ProjectSubcatVal Load (7.8ms)  SELECT &quot;PROJECT_SUBCAT_VALS&quot;.* FROM &quot;PROJECT_SUBCAT_VALS&quot; WHERE &quot;PROJECT_SUBCAT_VALS&quot;.&quot;PROJECT_ID&quot; = :a1 AND &quot;PROJECT_SUBCAT_VALS&quot;.&quot;IS_NEW&quot; = :a2  [[&quot;project_id&quot;, 35899], [&quot;is_new&quot;, 0]]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;*分析原因，慢在SQL查询上，减少 n+1 查询, 一次查询*&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;第二种&quot;&gt;第二种&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;把 solr searchable 中用到的 has_many 表先 includes 进来&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;no&quot;&gt;Project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;includes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:subcat_vals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:project_new_subcat_vals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:project_subcat_vals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:firmtenders&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:tenders&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:city&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:project_cat_floors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find_in_batches&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Sunspot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Sunspot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;commit&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;在查询数据库层面减少了 SQL 查询，速度快了很多&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;solr创建索引分为几步&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;数据库查询数据&lt;/li&gt;
  &lt;li&gt;SOLR 创建索引&lt;/li&gt;
  &lt;li&gt;SOLR 事务提交&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Solr 批量创建索引</summary></entry><entry><title type="html">ES6 对象的扩展（遍历）</title><link href="http://localhost:4000/2019/10/22/vuejs-3.html" rel="alternate" type="text/html" title="ES6 对象的扩展（遍历）" /><published>2019-10-22T18:01:22+08:00</published><updated>2019-10-22T18:01:22+08:00</updated><id>http://localhost:4000/2019/10/22/vuejs-3</id><content type="html" xml:base="http://localhost:4000/2019/10/22/vuejs-3.html"></content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">ES6 数组操作</title><link href="http://localhost:4000/2019/10/22/vuejs-2.html" rel="alternate" type="text/html" title="ES6 数组操作" /><published>2019-10-22T17:01:22+08:00</published><updated>2019-10-22T17:01:22+08:00</updated><id>http://localhost:4000/2019/10/22/vuejs-2</id><content type="html" xml:base="http://localhost:4000/2019/10/22/vuejs-2.html">&lt;h4 id=&quot;es6-常用的数组有这几种&quot;&gt;es6 常用的数组有这几种：&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;复制数组&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;a2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// [2, 2]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;上面代码中，a2并不是a1的克隆，而是指向同一份数据的另一个指针。修改a2，会直接导致a1的变化。&lt;/p&gt;

&lt;p&gt;ES5 只能用变通方法来复制数组。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;a2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// [1, 2]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;上面代码中，a1会返回原数组的克隆，再修改a2就不会对a1产生影响。&lt;/p&gt;

&lt;p&gt;扩展运算符提供了复制数组的简便写法。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 写法一&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 写法二&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;上面的两种写法，a2都是a1的克隆。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;合并数组&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;扩展运算符提供了数组合并的新写法。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;arr1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;arr2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;arr3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ES5 的合并数组&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;arr1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;arr2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;arr3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// [ 'a', 'b', 'c', 'd', 'e' ]&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ES6 的合并数组&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;arr1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;arr2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;arr3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// [ 'a', 'b', 'c', 'd', 'e' ]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;不过，这两种方法都是浅拷贝，使用的时候需要注意。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;a3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// true&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;a4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// true&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;上面代码中，a3和a4是用两种不同方法合并而成的新数组，但是它们的成员都是对原数组成员的引用，这就是浅拷贝。如果修改了原数组的成员，会同步反映到新数组&lt;/p&gt;

&lt;p&gt;未完待续…&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
转自 阮一峰 《ECMAScript 6 入门》&lt;/p&gt;

&lt;p&gt;原文链接： &lt;a href=&quot;http://es6.ruanyifeng.com/#docs/array&quot;&gt;http://es6.ruanyifeng.com/#docs/array&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">es6 常用的数组有这几种： 复制数组</summary></entry><entry><title type="html">pry 常用使用方法</title><link href="http://localhost:4000/2019/10/22/pry.html" rel="alternate" type="text/html" title="pry 常用使用方法" /><published>2019-10-22T11:30:22+08:00</published><updated>2019-10-22T11:30:22+08:00</updated><id>http://localhost:4000/2019/10/22/pry</id><content type="html" xml:base="http://localhost:4000/2019/10/22/pry.html">&lt;h4 id=&quot;常用的有以下几个gem&quot;&gt;常用的有以下几个gem：&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/deivid-rodriguez/pry-byebug&quot;&gt;pry-byebug&lt;/a&gt; （推荐）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/rweng/pry-rails&quot;&gt;pry-rails&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/pry/pry&quot;&gt;pry&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;通用&quot;&gt;通用：&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;在代码片段里加入（即可断点）： &lt;code class=&quot;highlighter-rouge&quot;&gt;binding.pry&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;退出到下一个 binding.pry ： &lt;code class=&quot;highlighter-rouge&quot;&gt;exit&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;退出: &lt;code class=&quot;highlighter-rouge&quot;&gt;exit-program&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;pry-byebug&quot;&gt;pry-byebug:&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;break&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;跳到下一步： &lt;code class=&quot;highlighter-rouge&quot;&gt;step&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;next&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;finish&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;continue&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;backtrace&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;跳到上一步：&lt;code class=&quot;highlighter-rouge&quot;&gt;up&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;跳到下一步：&lt;code class=&quot;highlighter-rouge&quot;&gt;down&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;frame&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;也还可以自定义:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;defined?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;PryByebug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Pry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;alias_command&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'c'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'continue'&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Pry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;alias_command&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'s'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'step'&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Pry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;alias_command&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'n'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'next'&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Pry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;alias_command&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'f'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'finish'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;简单的使用： &lt;code class=&quot;highlighter-rouge&quot;&gt;pry-rails&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;复杂的调试断点： &lt;code class=&quot;highlighter-rouge&quot;&gt;pry-byebug&lt;/code&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">常用的有以下几个gem： pry-byebug （推荐）</summary></entry><entry><title type="html">vuejs 中的生命周期</title><link href="http://localhost:4000/2019/10/21/vuejs-1.html" rel="alternate" type="text/html" title="vuejs 中的生命周期" /><published>2019-10-21T18:01:22+08:00</published><updated>2019-10-21T18:01:22+08:00</updated><id>http://localhost:4000/2019/10/21/vuejs-1</id><content type="html" xml:base="http://localhost:4000/2019/10/21/vuejs-1.html">&lt;h4 id=&quot;1-新建vue实例-vm--new-vue--&quot;&gt;1. 新建Vue实例， vm = new Vue({  })&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;beforeCreate&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;created&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;beforeMount&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;mounted&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;挂载完毕&lt;/p&gt;

&lt;h4 id=&quot;2-当-data-被修改时&quot;&gt;2. 当 data 被修改时:&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;beforeUpdate&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;updated&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;3-当-vmdestroy-时&quot;&gt;3. 当 vm.$destroy() 时:&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;beforeDestroy&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;destroyed&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">1. 新建Vue实例， vm = new Vue({ })</summary></entry><entry><title type="html">常用开发工具</title><link href="http://localhost:4000/2019/10/17/developer-tool1.html" rel="alternate" type="text/html" title="常用开发工具" /><published>2019-10-17T11:30:22+08:00</published><updated>2019-10-17T11:30:22+08:00</updated><id>http://localhost:4000/2019/10/17/developer-tool1</id><content type="html" xml:base="http://localhost:4000/2019/10/17/developer-tool1.html">&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;简单记录一下常用工具，还有很多，想起来再补&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://kapeli.com/dash&quot;&gt;dash&lt;/a&gt;  (MAC OS)  离线文档查询&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.getpostman.com/&quot;&gt;postman&lt;/a&gt;   测试 http/https 请求 的客户端&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://postwoman.io/&quot;&gt;postwoman&lt;/a&gt;   在线测试 http/https 请求&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://code.visualstudio.com/&quot;&gt;vscode&lt;/a&gt;   代码编辑器&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;gitlens&lt;/code&gt;  vscode git工具&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;open in browser&lt;/code&gt;  vscode 页面用浏览器打开工具&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ruby&lt;/code&gt; vscode ruby工具&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;vetur&lt;/code&gt; vscode vuejs工具&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh&quot;&gt;oh-my-zsh&lt;/a&gt;  命令行提示/主体颜色&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://ngrok.com/&quot;&gt;ngrok&lt;/a&gt;  &lt;a href=&quot;https://github.com/inconshreveable/ngrok&quot;&gt;github链接&lt;/a&gt; 内网转发&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/Alvin9999/new-pac/wiki&quot;&gt;翻墙工具&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://www.bejson.com/&quot;&gt;json&lt;/a&gt; 在线生成JSON，一系列操作JSON&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/serhii-londar/open-source-mac-os-apps&quot;&gt;MAC OS 软件&lt;/a&gt; mac上好用且免费的软件&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/geekcompany/ResumeSample&quot;&gt;简历&lt;/a&gt; 程序员简历模板&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/zulko/eagle.js/&quot;&gt;ppt&lt;/a&gt; 一个用Vue.js构建的易破解的幻灯片框架&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;未完待续…&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">简单记录一下常用工具，还有很多，想起来再补</summary></entry><entry><title type="html">Rails 删除小结</title><link href="http://localhost:4000/2019/10/16/rails-delete.html" rel="alternate" type="text/html" title="Rails 删除小结" /><published>2019-10-16T17:47:22+08:00</published><updated>2019-10-16T17:47:22+08:00</updated><id>http://localhost:4000/2019/10/16/rails-delete</id><content type="html" xml:base="http://localhost:4000/2019/10/16/rails-delete.html">&lt;h3 id=&quot;1-沙盒sandbox模式&quot;&gt;1. 沙盒(&lt;code class=&quot;highlighter-rouge&quot;&gt;sandbox&lt;/code&gt;)模式&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;可用沙盒模式进行测试，&lt;code class=&quot;highlighter-rouge&quot;&gt;rails c --sandbox&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;# Any modifications you make will be rolled back on exit&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sandbox&lt;/code&gt; 模式，会模拟 增删改 数据以及关联关系，并不会提交事务，所以不会插入到库， 所有的操作都会在退出的时候 &lt;code class=&quot;highlighter-rouge&quot;&gt;rollback&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;2-delete_all&quot;&gt;2. &lt;code class=&quot;highlighter-rouge&quot;&gt;delete_all&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;delete_all&lt;/code&gt; 不会走 &lt;code class=&quot;highlighter-rouge&quot;&gt;callback&lt;/code&gt;, 会直接生成一条 &lt;code class=&quot;highlighter-rouge&quot;&gt;delete SQL&lt;/code&gt; 语句，比如：&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt; &lt;span class=&quot;no&quot;&gt;Project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete_all&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# =&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECTS&quot; WHERE &quot;PROJECTS&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 1]]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;3-destroy_all&quot;&gt;3. &lt;code class=&quot;highlighter-rouge&quot;&gt;destroy_all&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;destroy_all&lt;/code&gt; 会走 &lt;code class=&quot;highlighter-rouge&quot;&gt;callback&lt;/code&gt;（相关的数据也都删除）, 会生成多条 &lt;code class=&quot;highlighter-rouge&quot;&gt;delete SQL&lt;/code&gt; 语句&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;destroy_all&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# =&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECTS&quot; WHERE &quot;PROJECTS&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 1]]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECTS&quot; WHERE &quot;PROJECTS&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 2]]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;ul&gt;
  &lt;li&gt;同时也会把模型中 &lt;code class=&quot;highlighter-rouge&quot;&gt;has_many&lt;/code&gt; 配置了 &lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :delete_all&lt;/code&gt; 或者 &lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :destroy&lt;/code&gt; 的给删除掉&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;31-destroy_all-之-has_many-中的参数-dependent-delete_all&quot;&gt;3.1. &lt;code class=&quot;highlighter-rouge&quot;&gt;destroy_all&lt;/code&gt; 之 &lt;code class=&quot;highlighter-rouge&quot;&gt;has_many&lt;/code&gt; 中的参数 &lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :delete_all&lt;/code&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :delete_all&lt;/code&gt; 会生成一条 &lt;code class=&quot;highlighter-rouge&quot;&gt;delete SQL&lt;/code&gt; 语句, &lt;code class=&quot;highlighter-rouge&quot;&gt;has_many&lt;/code&gt; 关系数据全部删除, &lt;code class=&quot;highlighter-rouge&quot;&gt;has_many&lt;/code&gt;关联的模型不会走 &lt;code class=&quot;highlighter-rouge&quot;&gt;callback&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;destroy_all&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# =&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECTS&quot; WHERE &quot;PROJECTS&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 1]]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECT_EXTRA_PROPERTIES&quot; WHERE &quot;PROJECT_EXTRA_PROPERTIES&quot;.&quot;PROJECT_ID&quot; = :a1  [[&quot;project_id&quot;, 1]]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECTS&quot; WHERE &quot;PROJECTS&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 2]]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECT_EXTRA_PROPERTIES&quot; WHERE &quot;PROJECT_EXTRA_PROPERTIES&quot;.&quot;PROJECT_ID&quot; = :a1  [[&quot;project_id&quot;, 2]]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h4 id=&quot;32-destroy_all-之-has_many-中的参数-dependent-destroy&quot;&gt;3.2. &lt;code class=&quot;highlighter-rouge&quot;&gt;destroy_all&lt;/code&gt; 之 &lt;code class=&quot;highlighter-rouge&quot;&gt;has_many&lt;/code&gt; 中的参数 &lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :destroy&lt;/code&gt;&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :destroy&lt;/code&gt; 会生成多条 &lt;code class=&quot;highlighter-rouge&quot;&gt;delete SQL&lt;/code&gt; 语句, &lt;code class=&quot;highlighter-rouge&quot;&gt;has_many&lt;/code&gt; 全部删除, 会走 &lt;code class=&quot;highlighter-rouge&quot;&gt;callback&lt;/code&gt;（相关的数据也都删除）&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;destroy_all&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# =&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECTS&quot; WHERE &quot;PROJECTS&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 1]]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 多条&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECT_EXTRA_PROPERTIES&quot; WHERE &quot;PROJECT_EXTRA_PROPERTIES&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 1804]]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECT_EXTRA_PROPERTIES&quot; WHERE &quot;PROJECT_EXTRA_PROPERTIES&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 1803]]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECTS&quot; WHERE &quot;PROJECTS&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 2]]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 多条&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECT_EXTRA_PROPERTIES&quot; WHERE &quot;PROJECT_EXTRA_PROPERTIES&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 1806]]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECT_EXTRA_PROPERTIES&quot; WHERE &quot;PROJECT_EXTRA_PROPERTIES&quot;.&quot;ID&quot; = :a1  [[&quot;id&quot;, 1805]]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;4-特别注意has_manydelete_all&quot;&gt;4. &lt;strong&gt;特别注意：&lt;code class=&quot;highlighter-rouge&quot;&gt;has_many.delete_all&lt;/code&gt;&lt;/strong&gt;&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sb&quot;&gt;`Project.find(1).project_extra_properties.delete_all`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;并不一定会生成一条&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`delete SQL`&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;语句&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h4 id=&quot;41-如果你的-has_many-配置了-dependent-参数-dependent-destroy-或者-dependent-delete_all&quot;&gt;4.1. &lt;strong&gt;如果你的 &lt;code class=&quot;highlighter-rouge&quot;&gt;has_many&lt;/code&gt; 配置了 &lt;code class=&quot;highlighter-rouge&quot;&gt;dependent&lt;/code&gt; 参数 &lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :destroy&lt;/code&gt; 或者 &lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :delete_all&lt;/code&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;会生成一条 &lt;code class=&quot;highlighter-rouge&quot;&gt;delete SQL&lt;/code&gt; 语句&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# DELETE FROM &quot;PROJECT_EXTRA_PROPERTIES&quot; WHERE &quot;PROJECT_EXTRA_PROPERTIES&quot;.&quot;PROJECT_ID&quot; = :a1  [[&quot;project_id&quot;, 1]]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h4 id=&quot;42-如果你的-has_many-没有配置-dependent-destroy-或者-dependent-delete_all&quot;&gt;4.2. &lt;strong&gt;如果你的 &lt;code class=&quot;highlighter-rouge&quot;&gt;has_many&lt;/code&gt; 没有配置 &lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :destroy&lt;/code&gt; 或者 &lt;code class=&quot;highlighter-rouge&quot;&gt;dependent: :delete_all&lt;/code&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;而是会生成一条-update-sql-语句&quot;&gt;而是会生成一条 &lt;code class=&quot;highlighter-rouge&quot;&gt;update&lt;/code&gt; SQL 语句&lt;/h4&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#  UPDATE &quot;PROJECT_EXTRA_PROPERTIES&quot; SET &quot;PROJECT_EXTRA_PROPERTIES&quot;.&quot;PROJECT_ID&quot; = NULL WHERE &quot;PROJECT_EXTRA_PROPERTIES&quot;.&quot;PROJECT_ID&quot; = :a1  [[&quot;project_id&quot;, 1]]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# select * from projects where project_name = NULL&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# select * from projects where project_name is NULL&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;以上两条语句查询出的结果不一样
&lt;code class=&quot;highlighter-rouge&quot;&gt;project_name = NULL&lt;/code&gt; 永远不会为 &lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;用 &lt;code class=&quot;highlighter-rouge&quot;&gt;project_name is NULL&lt;/code&gt; 代替&lt;/p&gt;</content><author><name></name></author><summary type="html">1. 沙盒(sandbox)模式 可用沙盒模式进行测试，rails c --sandbox # Any modifications you make will be rolled back on exit sandbox 模式，会模拟 增删改 数据以及关联关系，并不会提交事务，所以不会插入到库， 所有的操作都会在退出的时候 rollback</summary></entry></feed>