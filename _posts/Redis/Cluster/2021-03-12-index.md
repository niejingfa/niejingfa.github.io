---
layout: post
title:  "Redis 集群"
date:   2021-03-12 16:51:47 +0800
categories:
---
# Redis 的三种集群方式
`redis` 有三种集群方式：主从复制，哨兵模式和集群

## 1. 主从复制
- 从服务器连接主服务器，发送 `SYNC` 命令;
- 主服务器接收到 `SYNC` 命名后，开始执行 `BGSAVE` 命令生成 `RDB` 文件并使用缓冲区记录此后执行的所有写命令；
- 主服务器 `BGSAVE` 执行完后，向所有从服务器发送快照文件，并在发送期间继续记录被执行的写命令；
- 从服务器收到快照文件后丢弃所有旧数据，载入收到的快照；
- 主服务器快照发送完毕后开始向从服务器发送缓冲区中的写命令；
- 从服务器完成对快照的载入，开始接收命令请求，并执行来自主服务器缓冲区的写命令；（从服务器初始化完成）
- 主服务器每执行一个写命令就会向从服务器发送相同的写命令，从服务器接收并执行收到的写命令（从服务器初始化完成后的操作）

### 1.1. 优点
### 1.2. 缺点

## 2. 哨兵模式
## 3. 集群